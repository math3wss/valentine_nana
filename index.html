<!-- rebuild -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --pixel-red: #FF0000;
            --pixel-deep-pink: #FF1493;
            --pixel-hot-pink: #FF69B4;
            --pixel-light-pink: #FFB6C1;
            --pixel-soft-bg: #FFEBF0;
            --border-size: 4px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Press Start 2P', cursive;
            image-rendering: pixelated;
        }

        body {
            background-color: var(--pixel-soft-bg);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            /* Pixel Cat Cursor */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="M4 12h2v2H4zm2 2h2v2H6zm2 2h10v2H8zm10-2h2v-2h2v-2h2v-2h2V8h-2V6h-2v2h-2v2h-2v2h-2v2h-4v-2h-2v-2H8v-2H6V6H4v2H2v4h2z" fill="black"/><path d="M8 14h10v2H8z" fill="%23FFB6C1"/><path d="M22 10h2v2h-2zM6 10h2v2H6z" fill="black"/></svg>'), auto;
        }

        /* Pixel Heart Background */
        .bg-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--pixel-red);
            animation: float 6s infinite linear;
            opacity: 0.7;
        }

        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); }
            100% { transform: translateY(-10vh) rotate(360deg); }
        }

        /* Proposal Container */
        #proposal-container {
            text-align: center;
            z-index: 10;
        }

        h1 {
            color: var(--pixel-red);
            font-size: 1.5rem;
            line-height: 2;
            margin-bottom: 50px;
            text-shadow: 4px 4px 0px var(--pixel-hot-pink);
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            position: relative;
            min-height: 100px;
        }

        button {
            padding: 20px 30px;
            font-size: 1rem;
            border: var(--border-size) solid #000;
            box-shadow: 6px 6px 0px #000;
            cursor: pointer;
            transition: transform 0.1s;
        }

        #yes-btn {
            background-color: #00FF00;
            color: black;
        }

        #no-btn {
            background-color: var(--pixel-red);
            color: white;
            position: relative;
            white-space: nowrap;
            transition: all 0.3s ease-out;
        }

        /* Letter Page (Hidden initially) */
        #letter-page {
            display: none;
            width: 90%;
            max-width: 900px;
            position: relative;
            padding: 40px;
        }

        .content-wrapper {
            display: flex;
            position: relative;
            align-items: flex-start;
        }

        .letter-box {
            background: white;
            border: var(--border-size) solid #000;
            padding: 40px;
            width: 65%;
            box-shadow: 10px 10px 0px var(--pixel-hot-pink);
            min-height: 450px;
        }

        .letter-box h2 {
            color: var(--pixel-red);
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .letter-box textarea {
            width: 100%;
            height: 300px;
            border: none;
            resize: none;
            font-size: 0.8rem;
            line-height: 1.8;
            outline: none;
            color: #333;
            background: transparent;
        }

        /* Polaroid Stack */
        .polaroid-stack {
            width: 35%;
            position: relative;
            margin-left: -50px; /* Overlap effect */
            margin-top: 20px;
        }

        .polaroid {
            background: white;
            padding: 10px 10px 30px 10px;
            border: 3px solid #000;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.2);
            position: absolute;
            width: 200px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .polaroid:hover {
            z-index: 50 !important;
            transform: scale(1.1) rotate(0deg) !important;
        }

        .photo-slot {
            width: 100%;
            aspect-ratio: 1/1;
            background: #eee;
            border: 2px solid #000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        .photo-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-label {
            font-size: 0.5rem;
            text-align: center;
            margin-top: 10px;
            color: #000;
        }

        /* Individual Polaroid Placements */
        #p1 { transform: rotate(-5deg); top: 0; left: 0; z-index: 3; }
        #p2 { transform: rotate(8deg); top: 120px; left: 20px; z-index: 2; }
        #p3 { transform: rotate(-2deg); top: 250px; left: -10px; z-index: 1; }

        input[type="file"] {
            display: none;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 100;
        }

        @media (max-width: 768px) {
            .content-wrapper { flex-direction: column; align-items: center; }
            .letter-box { width: 100%; margin-bottom: 50px; }
            .polaroid-stack { width: 100%; margin-left: 0; height: 400px; }
            .polaroid { width: 150px; }
            h1 { font-size: 1rem; }
        }
    </style>
</head>
<body>
    <audio id="bg-music" loop>
         <source src="music/bg-music.mp3" type="audio/mpeg">
    </audio>
    <div class="bg-hearts" id="bg-hearts"></div>

    <div id="proposal-container">
        <h1>Will you be my<br>Valentine this year?</h1>
        <div class="btn-container">
            <button id="yes-btn">YES!</button>
            <button id="no-btn">NO</button>
        </div>
    </div>

    <div id="letter-page">
        <div class="content-wrapper">
            <div class="letter-box">
                <h2>Dear Valentine,</h2>
                <textarea placeholder="Write your pixel-perfect love letter here..."></textarea>
            </div>

            <div class="polaroid-stack">
                <div class="polaroid" id="p1">
                    <div class="photo-slot">
                        <img src="Images/img1.jpg" alt="US <3">
                    </div>
                    <div class="photo-label">US &lt;3</div>
                </div>
            
                <div class="polaroid" id="p2">
                    <div class="photo-slot">
                        <img src="Images/img2.jpg" alt="Memories">
                    </div>
                    <div class="photo-label">MEMORIES</div>
                </div>
            
                <div class="polaroid" id="p3">
                    <div class="photo-slot">
                        <img src="Images/img3.jpg" alt="Forever">
                    </div>
                    <div class="photo-label">FOREVER</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. Background Hearts
        const heartContainer = document.getElementById('bg-hearts');
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 3) + 's';
            heart.style.width = heart.style.height = Math.random() * 15 + 10 + 'px';
            heartContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 6000);
        }
        setInterval(createHeart, 400);

        // 2. Evasive "NO" Button
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        let noClickCount = 0;
        const noTexts = ["NO", "Are you sure?", "Think about it", "Please?", "Pretty please?", "You're mean!", "OK FINE!", "You have no choice", "Yes" ];

        document.addEventListener('mousemove', (e) => {
            const bx = noBtn.getBoundingClientRect();
            const btnCenterX = bx.left + bx.width / 2;
            const btnCenterY = bx.top + bx.height / 2;
            
            const distance = Math.hypot(e.clientX - btnCenterX, e.clientY - btnCenterY);

            if (distance < 120 && noClickCount < noTexts.length - 1) {
                const angle = Math.atan2(e.clientY - btnCenterY, e.clientX - btnCenterX);
                const moveDist = 50;
                
                let newX = bx.left - Math.cos(angle) * moveDist;
                let newY = bx.top - Math.sin(angle) * moveDist;

                // Keep within screen
                newX = Math.max(20, Math.min(window.innerWidth - bx.width - 20, newX));
                newY = Math.max(20, Math.min(window.innerHeight - bx.height - 20, newY));

                noBtn.style.position = 'fixed';
                noBtn.style.left = newX + 'px';
                noBtn.style.top = newY + 'px';
            }
        });

        noBtn.addEventListener('click', () => {
            noClickCount++;
            if (noClickCount < noTexts.length) {
                noBtn.innerText = noTexts[noClickCount];
            }
            if (noClickCount === noTexts.length - 1) {
                setTimeout(() => yesBtn.click(), 1000);
            }
        });

        // 3. Transition to Letter
        yesBtn.addEventListener('click', () => {
            createConfetti();
            document.getElementById('proposal-container').style.display = 'none';
            document.getElementById('letter-page').style.display = 'block';
            document.body.style.overflow = 'auto';
        });

        // 4. Image Upload Handling
        function handleImage(event, slotId) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const slot = document.getElementById(slotId);
                    slot.innerHTML = `<img src="${e.target.result}" />`;
                }
                reader.readAsDataURL(file);
            }
        }

        // 5. Confetti Effect
        function createConfetti() {
            for (let i = 0; i < 100; i++) {
                const conf = document.createElement('div');
                conf.classList.add('confetti');
                conf.style.backgroundColor = ['#FF0000', '#FF1493', '#FF69B4', '#FFFFFF'][Math.floor(Math.random() * 4)];
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.top = '-10px';
                conf.style.transform = `rotate(${Math.random() * 360}deg)`;
                document.body.appendChild(conf);

                const animation = conf.animate([
                    { transform: `translate(0, 0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${Math.random() * 200 - 100}px, 100vh) rotate(${Math.random() * 1000}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0, .9, .6, 1)'
                });
                animation.onfinish = () => conf.remove();
            }
        }
           // 6. Background music â€“ safe autoplay on first interaction
           // Replace your section 6 script with this:
            document.addEventListener("DOMContentLoaded", () => {
                const bgMusic = document.getElementById("bg-music");
                bgMusic.volume = 0.3; // Lower volume is usually better for background music
            
                const startMusic = () => {
                    bgMusic.play()
                        .then(() => {
                            console.log("Music playing!");
                            // Remove listeners once music starts
                            ["click", "touchstart", "keydown"].forEach(event => 
                                document.removeEventListener(event, startMusic)
                            );
                        })
                        .catch(error => console.log("Playback failed:", error));
                };
            
                // Add listeners for the first user interaction
                ["click", "touchstart", "keydown"].forEach(event => 
                    document.addEventListener(event, startMusic)
                );
            });

    </script>

</body>

</html>











